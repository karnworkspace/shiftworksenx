# เธเธนเนเธกเธทเธญเธเธฒเธฃเธ•เธดเธ”เธ•เธฑเนเธเนเธฅเธฐเนเธเนเธเธฒเธเธฃเธฐเธเธ Shift Work Management

## ๐ฏ เธ เธฒเธเธฃเธงเธกเธฃเธฐเธเธ

เธฃเธฐเธเธเธเธฑเธ”เธเธฒเธฃเน€เธงเธฃเธเธเธดเธเธฑเธ•เธดเธเธฒเธเนเธฅเธฐเธเธฃเธดเธซเธฒเธฃเธเนเธฒเนเธเนเธเนเธฒเธขเธชเธณเธซเธฃเธฑเธเธเธดเธ•เธดเธเธธเธเธเธฅเธญเธฒเธเธฒเธฃเธเธธเธ”เนเธฅเธฐเธซเธกเธนเนเธเนเธฒเธเธเธฑเธ”เธชเธฃเธฃ เธเธฑเธ’เธเธฒเธ”เนเธงเธข:
- **Backend**: Node.js + Express + Prisma + PostgreSQL
- **Frontend**: React + Vite + Ant Design + TypeScript

## ๐“ เธเธตเน€เธเธญเธฃเนเธ—เธตเนเธชเธณเธเธฑเธ

- เธชเธฃเนเธฒเธ/เนเธเนเนเธ/เธฅเธเนเธเธฃเธเธเธฒเธฃ
- เธเธณเธซเธเธ”เธชเธฑเธ”เธชเนเธงเธ % เธเธฒเธฃเนเธเธฃเนเนเธเธขเธฑเธเนเธเธฃเธเธเธฒเธฃเธญเธทเนเธ

### โ… 2. Staff Management  
- เธเธฑเธ”เธเธฒเธฃเธเนเธญเธกเธนเธฅเธเธเธฑเธเธเธฒเธ (เธเธทเนเธญ, เธ•เธณเนเธซเธเนเธ, เธเนเธฒเนเธฃเธ, เน€เธเธญเธฃเนเนเธ—เธฃ)
- เธฃเธญเธเธฃเธฑเธเธเธฃเธฐเน€เธ เธ—เธเธเธฑเธเธเธฒเธ: Regular (เธเธฃเธฐเธเธณ) เนเธฅเธฐ Spare (เธชเนเธเธฃเน)
- Toggle Active/Inactive (เนเธกเนเธฅเธเธเนเธญเธกเธนเธฅเน€เธเธทเนเธญเน€เธเนเธเธเธฃเธฐเธงเธฑเธ•เธด)
- เธเธณเธซเธเธ”เธเธฐเธ—เธณเธเธฒเธเธ•เธฑเนเธเธ•เนเธ

### โ… 3. Roster Management (เธ•เธฒเธฃเธฒเธเน€เธงเธฃ)
- เนเธชเธ”เธเธ•เธฒเธฃเธฒเธเน€เธงเธฃเนเธเธ Grid (เธเธเธฑเธเธเธฒเธ x เธงเธฑเธเธ—เธตเน)
- เธฃเธญเธเธฃเธฑเธเธฃเธซเธฑเธชเธเธฐ: 1, 2, 3, เธ”เธถเธ, OFF, เธ (เธเธฒเธ”), เธ (เธฅเธฒเธเนเธงเธข), เธ (เธฅเธฒเธเธดเธ), เธ (เธเธฑเธเธฃเนเธญเธ)
- Color Coding เธชเธณเธซเธฃเธฑเธเนเธ•เนเธฅเธฐเธเธฃเธฐเน€เธ เธ—เธเธฐ
- เธเธฅเธดเธเน€เธเธทเนเธญเธชเธฅเธฑเธเธเธฐเนเธ”เนเธ—เธฑเธเธ—เธต
- เนเธชเธ”เธเธชเธ–เธดเธ•เธดเธฃเธฒเธขเธงเธฑเธ (เธเธณเธเธงเธเธเธเน€เธเนเธฒเธเธฒเธ/OFF/เธเธฒเธ”/เธฅเธฒ)

### โ… 4. Reports & Export
- เธฃเธฒเธขเธเธฒเธเธซเธฑเธเน€เธเธดเธเธเธฃเธฐเธเธณเน€เธ”เธทเธญเธ (Monthly Deduction Report)
- Export เน€เธเนเธ CSV เนเธฅเธฐ Excel (.xlsx)
- เนเธชเธ”เธเธชเธฃเธธเธเธชเธ–เธดเธ•เธด (เธเธณเธเธงเธเธงเธฑเธเธ—เธณเธเธฒเธ, เธเธฒเธ”, เธฅเธฒ, เธขเธญเธ”เน€เธเธดเธ)

## ๐€ เธเธฒเธฃเธ•เธดเธ”เธ•เธฑเนเธ

### เธเนเธญเธเธณเธซเธเธ”เน€เธเธทเนเธญเธเธ•เนเธ
- Node.js >= 18
- PostgreSQL >= 14
- pnpm เธซเธฃเธทเธญ npm

### 1. เธ•เธดเธ”เธ•เธฑเนเธ Backend

```bash
cd backend

# เธ•เธดเธ”เธ•เธฑเนเธ dependencies
npm install

# เธ•เธฑเนเธเธเนเธฒ environment variables
# เธชเธฃเนเธฒเธเนเธเธฅเน .env เนเธฅเธฐเนเธชเน:
DATABASE_URL="postgresql://user:password@localhost:5432/shift_work"
JWT_SECRET="your-secret-key-here"
PORT=3001

# เธชเธฃเนเธฒเธ database schema
npx prisma migrate dev

# Seed เธเนเธญเธกเธนเธฅเธ•เธฑเธงเธญเธขเนเธฒเธ (optional)
npx prisma db seed

# เธฃเธฑเธเน€เธเธดเธฃเนเธเน€เธงเธญเธฃเน
npm run dev
```

Backend เธเธฐเธฃเธฑเธเธ—เธตเน `http://localhost:3001`

### 2. เธ•เธดเธ”เธ•เธฑเนเธ Frontend

```bash
cd frontend

# เธ•เธดเธ”เธ•เธฑเนเธ dependencies
npm install

# เธฃเธฑเธ development server
npm run dev
```

Frontend เธเธฐเธฃเธฑเธเธ—เธตเน `http://localhost:5173`

## ๐“– เธเธฒเธฃเนเธเนเธเธฒเธ

### 1. เธเธฒเธฃเธเธฑเธ”เธเธฒเธฃเนเธเธฃเธเธเธฒเธฃ

#### เน€เธเธดเนเธกเนเธเธฃเธเธเธฒเธฃเนเธซเธกเน
1. เนเธเธ—เธตเนเน€เธกเธเธน **เนเธเธฃเธเธเธฒเธฃ**
2. เธเธฅเธดเธ **เน€เธเธดเนเธกเนเธเธฃเธเธเธฒเธฃ**
3. เธเธฃเธญเธเธเนเธญเธกเธนเธฅ: เธเธทเนเธญเนเธเธฃเธเธเธฒเธฃ, เธชเธ–เธฒเธเธ—เธตเน, เธเธณเธญเธเธดเธเธฒเธข, เธชเธตเธเธตเธก
4. เธเธฅเธดเธ **เธเธฑเธเธ—เธถเธ**

2. เธเธฅเธดเธ **เน€เธเธดเนเธกเธเธฒเธฃเนเธเธฃเนเธเนเธฒเนเธเนเธเนเธฒเธข**
3. เน€เธฅเธทเธญเธ **เนเธเธฃเธเธเธฒเธฃเธเธฅเธฒเธขเธ—เธฒเธ** เนเธฅเธฐเธเธฃเธญเธ **เธชเธฑเธ”เธชเนเธงเธ %**
4. เธชเธฒเธกเธฒเธฃเธ–เน€เธเธดเนเธกเธซเธฅเธฒเธขเนเธเธฃเธเธเธฒเธฃเนเธ”เน
5. เธเธฅเธดเธ **เธเธฑเธเธ—เธถเธ**

**เธ•เธฑเธงเธญเธขเนเธฒเธ**: เนเธเธฃเธเธเธฒเธฃ A เนเธเธฃเนเธเนเธฒเนเธเนเธเนเธฒเธขเนเธซเน เนเธเธฃเธเธเธฒเธฃ B (30%) เนเธฅเธฐ เนเธเธฃเธเธเธฒเธฃ C (20%)

### 2. เธเธฒเธฃเธเธฑเธ”เธเธฒเธฃเธเธเธฑเธเธเธฒเธ

#### เน€เธเธดเนเธกเธเธเธฑเธเธเธฒเธ
1. เนเธเธ—เธตเนเน€เธกเธเธน **เธเธเธฑเธเธเธฒเธ**
2. เน€เธฅเธทเธญเธ**เนเธเธฃเธเธเธฒเธฃ** เธเธฒเธ dropdown
3. เธเธฅเธดเธ **เน€เธเธดเนเธกเธเธเธฑเธเธเธฒเธ**
4. เธเธฃเธญเธเธเนเธญเธกเธนเธฅ:
   - เธเธทเนเธญเธเธเธฑเธเธเธฒเธ
   - เธ•เธณเนเธซเธเนเธ
   - เน€เธเธญเธฃเนเนเธ—เธฃ (optional)
   - เธเนเธฒเนเธฃเธเธ•เนเธญเธงเธฑเธ (เธเธฒเธ—)
   - เธเธฃเธฐเน€เธ เธ—เธเธเธฑเธเธเธฒเธ (เธเธฃเธฐเธเธณ/เธชเนเธเธฃเน)
   - เธเธฐเธ—เธณเธเธฒเธเธ•เธฑเนเธเธ•เนเธ
5. เธเธฅเธดเธ **เธเธฑเธเธ—เธถเธ**

#### เน€เธเธดเธ”/เธเธดเธ”เธชเธ–เธฒเธเธฐเธเธเธฑเธเธเธฒเธ
- เนเธเน **Switch** เนเธเธเธญเธฅเธฑเธกเธเนเธชเธ–เธฒเธเธฐ
- เธเธเธฑเธเธเธฒเธเธ—เธตเนเธเธดเธ” (Inactive) เธเธฐเนเธกเนเนเธชเธ”เธเนเธเธ•เธฒเธฃเธฒเธเน€เธงเธฃเนเธซเธกเน
- เนเธ•เนเธเนเธญเธกเธนเธฅเธเธฐเธขเธฑเธเน€เธเนเธเนเธงเนเธชเธณเธซเธฃเธฑเธเธฃเธฒเธขเธเธฒเธเธขเนเธญเธเธซเธฅเธฑเธ

### 3. เธเธฒเธฃเธเธฑเธ”เธ•เธฒเธฃเธฒเธเน€เธงเธฃ

#### เธชเธฃเนเธฒเธ/เนเธเนเนเธเธ•เธฒเธฃเธฒเธเน€เธงเธฃ
1. เนเธเธ—เธตเนเน€เธกเธเธน **เธ•เธฒเธฃเธฒเธเน€เธงเธฃ**
2. เน€เธฅเธทเธญเธ **เนเธเธฃเธเธเธฒเธฃ** เนเธฅเธฐ **เน€เธ”เธทเธญเธ/เธเธต**
3. เธฃเธฐเธเธเธเธฐเนเธชเธ”เธเธ•เธฒเธฃเธฒเธเนเธเธ Grid (เธเธเธฑเธเธเธฒเธ x เธงเธฑเธเธ—เธตเน 1-31)
4. **เธเธฅเธดเธเธ—เธตเนเธเนเธญเธ** เน€เธเธทเนเธญเธชเธฅเธฑเธเธเธฐ (1 โ’ 2 โ’ 3 โ’ OFF โ’ 1)
5. เธเธฒเธฃเน€เธเธฅเธตเนเธขเธเนเธเธฅเธเธเธฐเธเธฑเธเธ—เธถเธเธญเธฑเธ•เนเธเธกเธฑเธ•เธด

#### เธชเธฑเธเธฅเธฑเธเธฉเธ“เนเธเธฐ
- **เธเธฐ 1, 2, 3, เธ”เธถเธ**: เธเธฐเธ—เธณเธเธฒเธ (เธชเธตเน€เธเธตเธขเธง, เธเนเธณเน€เธเธดเธ, เธกเนเธงเธ, เธเธกเธเธน)
- **OFF**: เธงเธฑเธเธซเธขเธธเธ” (เธชเธตเน€เธ—เธฒ)
- **เธ**: เธเธฒเธ”เธเธฒเธ (เธชเธตเนเธ”เธ)
- **เธ**: เธฅเธฒเธเนเธงเธข (เธชเธตเธชเนเธก)
- **เธ**: เธฅเธฒเธเธดเธ (เธชเธตเธชเนเธกเธญเนเธญเธ)
- **เธ**: เธเธฑเธเธฃเนเธญเธ (เธชเธตเน€เธเธตเธขเธงเธกเธดเนเธเธ•เน)

### 4. เธ”เธนเธฃเธฒเธขเธเธฒเธเนเธฅเธฐเธชเนเธเธญเธญเธ

#### เธฃเธฒเธขเธเธฒเธเธซเธฑเธเน€เธเธดเธเธเธฃเธฐเธเธณเน€เธ”เธทเธญเธ
1. เนเธเธ—เธตเนเน€เธกเธเธน **เธฃเธฒเธขเธเธฒเธ** โ’ เนเธ—เนเธ **เธฃเธฒเธขเธเธฒเธเธซเธฑเธเน€เธเธดเธ**
2. เน€เธฅเธทเธญเธ **เนเธเธฃเธเธเธฒเธฃ** เนเธฅเธฐ **เน€เธ”เธทเธญเธ/เธเธต**
3. เธฃเธฐเธเธเธเธฐเนเธชเธ”เธ:
   - เธเธณเธเธงเธเธงเธฑเธเธ—เธณเธเธฒเธ
   - เธเธณเธเธงเธเธงเธฑเธเธเธฒเธ”/เธฅเธฒ
   - เน€เธเธดเธเน€เธ”เธทเธญเธเธเธฒเธ”เธซเธงเธฑเธ
   - เธขเธญเธ”เธซเธฑเธเน€เธเธดเธ
   - เน€เธเธดเธเน€เธ”เธทเธญเธเธชเธธเธ—เธเธด
4. เธเธฅเธดเธ **เธ”เธฒเธงเธเนเนเธซเธฅเธ” CSV** เธซเธฃเธทเธญ **เธ”เธฒเธงเธเนเนเธซเธฅเธ” Excel**

2. เน€เธฅเธทเธญเธ **เน€เธ”เธทเธญเธ/เธเธต**
3. เธฃเธฐเธเธเธเธฐเนเธชเธ”เธ:
   - เธ•เนเธเธ—เธธเธเน€เธ”เธดเธกเธเธญเธเนเธ•เนเธฅเธฐเนเธเธฃเธเธเธฒเธฃ
   - เธเนเธฒเนเธเนเธเนเธฒเธขเธ—เธตเนเนเธเธฃเนเธญเธญเธเนเธ (Shared Out)
   - เธเนเธฒเนเธเนเธเนเธฒเธขเธ—เธตเนเธฃเธฑเธเน€เธเนเธฒเธกเธฒ (Shared In)
   - เธ•เนเธเธ—เธธเธเธชเธธเธ—เธเธด (Net Cost)

## ๐”ง API Endpoints

### Projects
```
GET    /api/projects              - เธ”เธถเธเธฃเธฒเธขเธเธฒเธฃเนเธเธฃเธเธเธฒเธฃเธ—เธฑเนเธเธซเธกเธ”
GET    /api/projects/:id          - เธ”เธถเธเนเธเธฃเธเธเธฒเธฃเธ•เธฒเธก ID
POST   /api/projects              - เธชเธฃเนเธฒเธเนเธเธฃเธเธเธฒเธฃเนเธซเธกเน
PUT    /api/projects/:id          - เนเธเนเนเธเนเธเธฃเธเธเธฒเธฃ
DELETE /api/projects/:id          - เธฅเธเนเธเธฃเธเธเธฒเธฃ
```

### Staff
```
GET    /api/staff?projectId=xxx   - เธ”เธถเธเธฃเธฒเธขเธเธฒเธฃเธเธเธฑเธเธเธฒเธเธเธญเธเนเธเธฃเธเธเธฒเธฃ
GET    /api/staff/:id             - เธ”เธถเธเธเธเธฑเธเธเธฒเธเธ•เธฒเธก ID
POST   /api/staff                 - เธชเธฃเนเธฒเธเธเธเธฑเธเธเธฒเธเนเธซเธกเน
PUT    /api/staff/:id             - เนเธเนเนเธเธเธเธฑเธเธเธฒเธ
PATCH  /api/staff/:id/toggle-status - เน€เธเธดเธ”/เธเธดเธ”เธชเธ–เธฒเธเธฐเธเธเธฑเธเธเธฒเธ
DELETE /api/staff/:id             - เธฅเธเธเธเธฑเธเธเธฒเธ
```

### Rosters
```
GET    /api/rosters?projectId=xxx&year=2567&month=1  - เธ”เธถเธเธ•เธฒเธฃเธฒเธเน€เธงเธฃ
GET    /api/rosters/stats?rosterId=xxx&day=15        - เธ”เธถเธเธชเธ–เธดเธ•เธดเธฃเธฒเธขเธงเธฑเธ
POST   /api/rosters/entry         - เธญเธฑเธเน€เธ”เธ•เธเธฐเธเธญเธเธเธเธฑเธเธเธฒเธ
POST   /api/rosters/batch         - เธญเธฑเธเน€เธ”เธ•เธซเธฅเธฒเธขเธเธฐเธเธฃเนเธญเธกเธเธฑเธ
DELETE /api/rosters/entry/:id     - เธฅเธเธฃเธฒเธขเธเธฒเธฃเธเธฐ
```

### Reports
```
GET /api/reports/deduction?projectId=xxx&year=2567&month=1  - เธฃเธฒเธขเธเธฒเธเธซเธฑเธเน€เธเธดเธ
GET /api/reports/financial-overview?year=2567&month=1       - เธ เธฒเธเธฃเธงเธกเธเธฒเธฃเน€เธเธดเธ
GET /api/reports/export?projectId=xxx&year=2567&month=1     - Export CSV
```

## ๐“ Database Schema

### เธซเธฅเธฑเธเธเธฒเธฃเธญเธญเธเนเธเธ
- **Projects**: เน€เธเนเธเธเนเธญเธกเธนเธฅเนเธเธฃเธเธเธฒเธฃเนเธฅเธฐ theme color
- **Staff**: เน€เธเนเธเธเนเธญเธกเธนเธฅเธเธเธฑเธเธเธฒเธ เธกเธตเธเธดเธฅเธ”เน `isActive` เธชเธณเธซเธฃเธฑเธเน€เธเธดเธ”/เธเธดเธ”เนเธ”เธขเนเธกเนเธฅเธเธเนเธญเธกเธนเธฅ
- **Roster**: เธ•เธฒเธฃเธฒเธเน€เธงเธฃเธฃเธฒเธขเน€เธ”เธทเธญเธเธเธญเธเนเธ•เนเธฅเธฐเนเธเธฃเธเธเธฒเธฃ
- **RosterEntry**: เธฃเธฒเธขเธเธฒเธฃเธเธฐเธเธญเธเธเธเธฑเธเธเธฒเธเนเธ•เนเธฅเธฐเธงเธฑเธ
- **MonthlyAttendance**: เธชเธฃเธธเธเธเธฒเธฃเธ—เธณเธเธฒเธเธเธฃเธฐเธเธณเน€เธ”เธทเธญเธ (เธขเธฑเธเนเธกเนเนเธ”เนเนเธเนเธเธฒเธเน€เธ•เนเธกเธฃเธนเธเนเธเธ)

## ๐จ UI/UX Highlights

### Color Coding
- เนเธเนเธชเธตเนเธขเธเธเธฃเธฐเน€เธ เธ—เธเธฐเนเธซเนเน€เธซเนเธเธเธฑเธ”เน€เธเธ
- เธเธเธฑเธเธเธฒเธ Spare เธกเธต Tag เธชเธตเธชเนเธก
- เธเธเธฑเธเธเธฒเธ Inactive เนเธชเธ”เธเน€เธเนเธเธชเธตเน€เธ—เธฒเธเธฒเธ

### Responsive Design
- เธ•เธฒเธฃเธฒเธเน€เธงเธฃเธชเธฒเธกเธฒเธฃเธ– scroll เธเนเธฒเธข-เธเธงเธฒเนเธ”เน
- เธฃเธญเธเธฃเธฑเธเธซเธเนเธฒเธเธญเธเธเธฒเธ”เธ•เนเธฒเธเน

### Real-time Feedback
- เนเธชเธ”เธ Loading state เธเธ“เธฐเนเธซเธฅเธ”เธเนเธญเธกเธนเธฅ
- เนเธชเธ”เธ Success/Error message เน€เธกเธทเนเธญเธ—เธณเธเธฒเธเธชเธณเน€เธฃเนเธเธซเธฃเธทเธญเธฅเนเธกเน€เธซเธฅเธง

## ๐ เธเธฒเธฃเนเธเนเธเธฑเธเธซเธฒ

### Backend เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เน€เธเธทเนเธญเธกเธ•เนเธญ Database
```bash
# เธ•เธฃเธงเธเธชเธญเธ PostgreSQL service
# Windows
services.msc โ’ เธซเธฒ PostgreSQL

# เธ•เธฃเธงเธเธชเธญเธ DATABASE_URL เนเธ .env
DATABASE_URL="postgresql://user:password@localhost:5432/dbname"

# เธฃเธฑเธ migration เนเธซเธกเน
npx prisma migrate reset
npx prisma migrate dev
```

### Frontend เนเธกเนเธชเธฒเธกเธฒเธฃเธ–เน€เธฃเธตเธขเธ API
1. เธ•เธฃเธงเธเธชเธญเธเธงเนเธฒ Backend เธฃเธฑเธเธญเธขเธนเนเธ—เธตเน port 3001
2. เธ•เธฃเธงเธเธชเธญเธ CORS settings เนเธ backend
3. เธ•เธฃเธงเธเธชเธญเธ API_URL เนเธเนเธเธฅเน Frontend (`http://localhost:3001/api`)

### เธ•เธฒเธฃเธฒเธเน€เธงเธฃเนเธกเนเนเธชเธ”เธ
1. เธ•เธฃเธงเธเธชเธญเธเธงเนเธฒเน€เธฅเธทเธญเธเนเธเธฃเธเธเธฒเธฃเนเธฅเนเธง
2. เธ•เธฃเธงเธเธชเธญเธเธงเนเธฒเธกเธตเธเธเธฑเธเธเธฒเธ Active เนเธเนเธเธฃเธเธเธฒเธฃ
3. เน€เธเนเธ Console เนเธ Browser DevTools

## ๐” Security Notes

- เนเธเน JWT เธชเธณเธซเธฃเธฑเธ Authentication (เธเธงเธฃเน€เธเธดเนเธก Login Page เธเธฃเธดเธ)
- Password เธเธงเธฃ hash เธ”เนเธงเธข bcrypt
- เธเธงเธฃเน€เธเธดเนเธก Rate Limiting เธชเธณเธซเธฃเธฑเธ Production
- เธ•เธฃเธงเธเธชเธญเธ Permissions เธ•เธฒเธก Role (SUPER_ADMIN, SITE_MANAGER)

## ๐€ Production Deployment

เธ”เธนเธฃเธฒเธขเธฅเธฐเน€เธญเธตเธขเธ”เนเธเธ step-by-step เนเธฅเธฐเนเธเธฅเน `.zip` เธชเธณเธซเธฃเธฑเธเธญเธฑเธเนเธซเธฅเธ”เนเธ”เนเธ—เธตเน `DEPLOY_GUIDE.md`

### Backend
```bash
npm run build
npm start
```

### Frontend
```bash
npm run build
# deploy dist/ folder เนเธเธขเธฑเธ CDN เธซเธฃเธทเธญ Static hosting
```

## ๐“ Support

เธซเธฒเธเธกเธตเธเธฑเธเธซเธฒเธซเธฃเธทเธญเธเนเธญเธชเธเธชเธฑเธข เธชเธฒเธกเธฒเธฃเธ–เธ•เธดเธ”เธ•เนเธญเนเธ”เนเธ—เธตเน Developer เธซเธฃเธทเธญเธ”เธนเน€เธญเธเธชเธฒเธฃเน€เธเธดเนเธกเน€เธ•เธดเธกเนเธ:
- Backend: `backend/README.md`
- Frontend: `frontend/README.md`
- Database Schema: `backend/prisma/schema.prisma`

---

**เน€เธงเธญเธฃเนเธเธฑเธ**: 1.0.0  
**เธชเธฃเนเธฒเธเน€เธกเธทเนเธญ**: เธกเธเธฃเธฒเธเธก 2026  
**License**: Private
